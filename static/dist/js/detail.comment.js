$("#commentRegisterForm").submit(function(){var t=$(this);return $.ajax({method:"POST",url:"/api/comments/insert",data:{type:t.find("input[name=type]").val(),type_id:t.find("input[name=type_id]").val(),comment:t.find("textarea[name=comment]").val()}}).done(function(e){return e.result?($(".comments").append(e.body.insert_comment),t.find("textarea[name=comment]").val(""),void $(".commentArea").children().find(".number").text(e.body.comment_count)):(alert("댓글 등록 실패"),!1)}).fail(function(t){alert(t.body.message)}),!1}),$(document).on("click",".commentEditBtn",function(){var t=$(this).data("id");$("#commentDiv_"+t).hide(),$("#commentEditDiv_"+t).show()}),$(document).on("click",".commentEditCancelBtn",function(){var t=$(this).data("id");$("#commentDiv_"+t).show(),$("#commentEditDiv_"+t).hide()}),$(document).on("click",".commentEditSubmit",function(){function t(t){return t.replace(/\n/g,"<br />")}var e=$(this).data("id"),n=$("#commentEditDiv_"+e).find("#commentEditText").val();$.ajax({method:"POST",url:"/api/comments/update",data:{type:$(this).data("type"),type_comment_id:e,comment:n}}).done(function(n){"update"===n.body.result_type?($("#commentDiv_"+e).show(),$("#commentEditDiv_"+e).hide(),$("#comment_"+e).find(".comment").html(t(n.body.comment))):alert(n.body.message)}).fail(function(){alert("서버에 문제가 있어 정상적으로 처리되지 않았습니다. \r\n잠시 후에 다시 시도해주세요.")})}),$(document).on("click",".commentDeleteBtn",function(){if(confirm("정말 삭제 하시겠습니까?")===!1)return!1;var t=$(this);return $.ajax({method:"POST",url:"/api/comments/delete",data:{type:t.data("type"),type_comment_id:t.data("id")}}).done(function(t){"delete"===t.body.result_type?($("#comment_"+t.body.type_comment_id).remove(),$(".commentArea .number").text(t.body.comment_count)):alert(t.body.message)}).fail(function(){alert("서버에 문제가 있어 정상적으로 처리되지 않았습니다. \r\n잠시 후에 다시 시도해주세요.")}),!1}),$(".commentMoreBtn").click(function(){var t,e=$(this),n=e.data("type"),m=e.data("type-id"),o=$(".comments li").length;e.closest(".commentMore").hide(),$(".patLoader").show(),$.post("/api/comments",{type:n,type_id:m,offset:o,limit:3}).done(function(n){$(".comments").prepend(n.body.comments),$(".patLoader").hide(),t=o+3,t<n.body.comment_count&&e.closest(".commentMore").show()})});