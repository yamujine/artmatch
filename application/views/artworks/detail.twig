{% extends "base.twig" %}

{% block style %}
  <link rel="stylesheet" type="text/css" href="/static/dist/magnific-popup/magnific-popup.css">
  <link rel="stylesheet" type="text/css" href="/static/dist/slick/slick.css">
  <link rel="stylesheet" type="text/css" href="/static/dist/css/artworks/detail.min.css">
{% endblock %}

{% block script %}
  <script type="text/javascript" src="/static/dist/magnific-popup/jquery.magnific-popup.min.js"></script>
  <script type="text/javascript" src="/static/dist/slick/slick.min.js"></script>
  <script type="text/javascript">
    $(function () {
      // 추가 이미지 Carousel 구현은 6개가 넘어갈 경우
      var additionalImageCount = $('.additionalImages .slider div').length;
      if (additionalImageCount > 6) {
        // Carousel 시작
        $('.slider').slick({
          infinite: false,
          variableWidth: true,

          slidesToShow: 6,
          slidesToScroll: 1,

          prevArrow: false,
          nextArrow: false
        });

        // 슬라이더 컨트롤
        $('.sliderPrevBtn').click(function () {
          $('.slider').slick('slickPrev');

          return false;
        });

        $('.sliderNextBtn').click(function () {
          $('.slider').slick('slickNext');

          return false;
        });
      }

      // 이미지 전체 보기
      $('.popupImage').magnificPopup({
        type: 'image',
        gallery: {
          enabled: true
        }
      });

      // PICK
      $('.pickBtn').click(function () {
        var $this = $(this);

        $.ajax({
          method: "POST",
          url: "/api/pick",
          data: {
            type: $this.data('type'),
            type_id: $this.data('id')
          }
        })
            .done(function (data) {
              if (data.body.result_type === 'on') {
                alert('ON!');
              } else if (data.body.result_type === 'off') {
                alert('OFF!');
              } else {
                alert(data.body.message);
              }
            })
            .fail(function () {
              alert('서버에 문제가 있어 정상적으로 처리되지 않았습니다. \r\n잠시 후에 다시 시도해주세요.');
            });

        return false;
      });
    });
  </script>
{% endblock %}

{% block contents %}
  <div id="patDetail">
    <div class="container">
      <!-- == 제목 -->
      <div class="meta">
        <!-- == 제목 -->
        <div class="title">
          {{ artwork.title }}
        </div>
        <!-- == 작가 -->
        <div class="name">
          {# TODO: 작가 정보 채워야함 #}
          염지희
        </div>
      </div>
      <!-- //== 제목 -->
      <!-- == 작품 -->
      <div class="artworks">
        <div class="mainThumbnail">
          <!-- == 메인 이미지 -->
          <div class="mainImage">
            <div class="image">
              <img
                  src="http://www.with-art.com/files/attach/images/54/707/IM_2.jpg"
                  data-mfp-src="http://www.with-art.com/files/attach/images/54/707/IM_2.jpg" class="popupImage"
              />
            </div>
          </div>
          <!-- //== -->
          <!-- == 저작권 -->
          <div class="copyright">
            {# TODO: 작가 정보 채워야함 #}
            Copyright &copy; 염지희 All right reserved. 작품 이미지의 도용 및 무단 재배포를 금합니다.
          </div>
          <!-- //== -->
        </div>
        {#{% if artwork.extra_images|length > 0 %}#}
          <div class="additionalImages">
            {# TODO: 아래 주석 참고! #}
            {# {% if artwork.extra_images|length <= 6 %} deactivate{% endif %} 아래 slider class 옆에 추가해야함. #}
            <div class="slider">
              <div class="item">
                <div class="imgThumbnail">
                  <img
                      src="https://scontent.cdninstagram.com/t51.2885-15/s640x640/sh0.08/e35/13269567_189919781402885_180305573_n.jpg?ig_cache_key=MTI2MjExOTcwNzY2MTU0NDUzNg%3D%3D.2"
                      data-mfp-src="https://scontent.cdninstagram.com/t51.2885-15/s640x640/sh0.08/e35/13269567_189919781402885_180305573_n.jpg?ig_cache_key=MTI2MjExOTcwNzY2MTU0NDUzNg%3D%3D.2" class="popupImage"
                  />
                </div>
              </div>
              <div class="item">
                <div class="imgThumbnail">
                  <img
                      src="http://cfile28.uf.tistory.com/image/254AD139574C5C3B1459E7"
                      data-mfp-src="http://cfile28.uf.tistory.com/image/254AD139574C5C3B1459E7"
                      class="popupImage"
                  />
                </div>
              </div>
              <div class="item">
                <div class="imgThumbnail">
                  <img
                      src="http://baetokki.com/data/editor/1609/1993969105_1474021834.072.jpeg"
                      data-mfp-src="http://baetokki.com/data/editor/1609/1993969105_1474021834.072.jpeg"
                      class="popupImage"
                  />
                </div>
              </div>
              <div class="item">
                <div class="imgThumbnail">
                  <img
                      src="http://cfile28.uf.tistory.com/image/254AD139574C5C3B1459E7"
                      data-mfp-src="http://cfile28.uf.tistory.com/image/254AD139574C5C3B1459E7"
                      class="popupImage"
                  />
                </div>
              </div>
              <div class="item">
                <div class="imgThumbnail">
                  <img
                      src="https://scontent.cdninstagram.com/t51.2885-15/s640x640/sh0.08/e35/13269567_189919781402885_180305573_n.jpg?ig_cache_key=MTI2MjExOTcwNzY2MTU0NDUzNg%3D%3D.2"
                      data-mfp-src="https://scontent.cdninstagram.com/t51.2885-15/s640x640/sh0.08/e35/13269567_189919781402885_180305573_n.jpg?ig_cache_key=MTI2MjExOTcwNzY2MTU0NDUzNg%3D%3D.2"
                      class="popupImage"
                  />
                </div>
              </div>
              <div class="item">
                <div class="imgThumbnail">
                  <img
                      src="http://baetokki.com/data/editor/1609/1993969105_1474021834.072.jpeg"
                      data-mfp-src="http://baetokki.com/data/editor/1609/1993969105_1474021834.072.jpeg"
                      class="popupImage"
                  />
                </div>
              </div>
              <div class="item">
                <div class="imgThumbnail">
                  <img
                      src="https://scontent.cdninstagram.com/t51.2885-15/s640x640/sh0.08/e35/13269567_189919781402885_180305573_n.jpg?ig_cache_key=MTI2MjExOTcwNzY2MTU0NDUzNg%3D%3D.2"
                      data-mfp-src="https://scontent.cdninstagram.com/t51.2885-15/s640x640/sh0.08/e35/13269567_189919781402885_180305573_n.jpg?ig_cache_key=MTI2MjExOTcwNzY2MTU0NDUzNg%3D%3D.2"
                      class="popupImage"
                  />
                </div>
              </div>
            </div>
            {#{% if artwork.extra_images|length > 6 %}#}
              <button class="sliderPrevBtn"></button>
              <button class="sliderNextBtn"></button>
            {#{% endif %}#}
          </div>
        {#{% endif %}#}
      </div>
      <!-- //== 작품 -->
      <!-- == 작가의 한마디 -->
      <div class="artistCommentary">
        <div class="meta">
          <div class="artistProfileImage">
            <img src="/static/images/tom.jpg" class="img-circle"/>
          </div>
          <div class="artistSays">작가님의 한마디</div>
          <ul class="status">
            {% if artwork.status == 3 %}
              <li class="exhibition">
                {% if artwork.status == 1 %}
                  공간 구함
                {% elseif artwork.status == 2 %}
                  현재 전시중
                {% endif %}
              </li>
            {% endif %}
            {% if artwork.for_sale == 1 %}
              <li class="buy">
                구매가능
              </li>
            {% endif %}
          </ul>
        </div>
        <div class="commentary">
          {{ artwork.description }}
        </div>
        <div class="tags">
          {{ artwork.tags }}
        </div>
        <div class="pick">
          <button class="pickBtn" data-type="artwork" data-id="{{ artwork.id }}">
            PICK {{ artwork.pick_count }}
          </button>
        </div>
      </div>
      <!-- //== 작가의 한마디 -->
      {#{% if artwork.use_comment == 1 %}#}
        <!-- == 댓글 -->
        <div class="commentArea">
          <div class="title">댓글 <span class="number">3</span></div>
          <hr class="divider"/>
          <div class="commentMore">
            <button class="commentMoreBtn">
              이전 댓글 더보기 <i class="glyphicon glyphicon-menu-down"></i>
            </button>
          </div>
          <ul class="comments">
            {#{% for comment in comments %}#}
              <li>
                <div class="profileImage">
                  <img src="/static/images/tom.jpg" class="img-circle"/>
                </div>
                <div class="content">
                  <div class="meta">콩보리 <span class="regDate">16.02.11</span></div>
                  <div class="comment">작가님 세계관이 너무 좋으네요! 소장하고 싶은 작업들이 많지만 우선 전시장부터 가보고 찜콩해보기로 항상 화이팅입니다! 지켜보고 있는 사람들이 많다는 걸 기억해주세요. </div>
                </div>
              </li>
              <li>
                <div class="profileImage">
                  <img src="/static/images/tom.jpg" class="img-circle"/>
                </div>
                <div class="content">
                  <div class="meta">콩보리 <span class="regDate">16.02.11</span></div>
                  <div class="comment">작가님 세계관이 너무 좋으네요! 소장하고 싶은 작업들이 많지만 우선 전시장부터 가보고 찜콩해보기로 항상 화이팅입니다! 지켜보고 있는 사람들이 많다는 걸 기억해주세요. </div>
                </div>
              </li>
              <li>
                <div class="profileImage">
                  <img src="/static/images/tom.jpg" class="img-circle"/>
                </div>
                <div class="content">
                  <div class="meta">콩보리 <span class="regDate">16.02.11</span></div>
                  <div class="comment">작가님 세계관이 너무 좋으네요! 소장하고 싶은 작업들이 많지만 우선 전시장부터 가보고 찜콩해보기로 항상 화이팅입니다! 지켜보고 있는 사람들이 많다는 걸 기억해주세요. </div>
                </div>
              </li>
            {#{% endfor %}#}
          </ul>
        </div>
        <!-- //== 댓글 -->
        <!-- == 댓글 입력 -->
        <form class="commentForm">
          <textarea class="commentInput" name="comment" placeholder="작품에 대한 느낌을 남겨보세요."></textarea>
          <button type="submit">확인</button>
        </form>
        <!-- //== 댓글 입력 -->
      {#{% endif %}#}
      {#{% if exhibitions|length > 0 %}#}
        <!-- == 전시 이력 -->
        <div class="exhibitionArea">
          <div class="titleWrap">
            <div class="title">전시했던 장소</div>
            <ul class="sliderControl">
              <li class="active"><a href="#">01</a></li>
              <li><a href="#">02</a></li>
            </ul>
          </div>
          <ul class="exhibitions">
            <li>
              <a href="#">
                <div class="imgThumbnail">
                  <img src="http://www.with-art.com/files/attach/images/54/707/IM_2.jpg"/>
                </div>
                <div class="meta">
                  <div class="name">이한진</div>
                  <div class="place">
                    <div class="pin"></div>
                    <div class="keyword">홍대</div>
                  </div>
                  <div class="date">
                    2016.12.10 ~ 24
                  </div>
                </div>
              </a>
            </li>
            <li>
              <a href="#">
                <div class="imgThumbnail">
                  <img src="http://www.with-art.com/files/attach/images/54/707/IM_2.jpg"/>
                </div>
                <div class="meta">
                  <div class="name">이한진</div>
                  <div class="place">
                    <div class="pin"></div>
                    <div class="keyword">홍대</div>
                  </div>
                  <div class="date">
                    2016.12.10 ~ 24
                  </div>
                </div>
              </a>
            </li>
            <li>
              <a href="#">
                <div class="imgThumbnail">
                  <img src="http://www.with-art.com/files/attach/images/54/707/IM_2.jpg"/>
                </div>
                <div class="meta">
                  <div class="name">이한진</div>
                  <div class="place">
                    <div class="pin"></div>
                    <div class="keyword">홍대</div>
                  </div>
                  <div class="date">
                    2016.12.10 ~ 24
                  </div>
                </div>
              </a>
            </li>
            <li>
              <a href="#">
                <div class="imgThumbnail">
                  <img src="http://www.with-art.com/files/attach/images/54/707/IM_2.jpg"/>
                </div>
                <div class="meta">
                  <div class="name">이한진</div>
                  <div class="place">
                    <div class="pin"></div>
                    <div class="keyword">홍대</div>
                  </div>
                  <div class="date">
                    2016.12.10 ~ 24
                  </div>
                </div>
              </a>
            </li>
          </ul>
        </div>
        <!-- //== 전시 이력 -->
      {#{% endif %}#}
    </div>
  </div>
{% endblock %}
