{% extends "base.twig" %}

{% block style %}
  <link rel="stylesheet" type="text/css" href="../../static/dist/css/main/main.min.css">
  <link rel="stylesheet" type="text/css" href="../../static/dist/slick/slick.css">
{% endblock %}

{% block script %}
  <script type="text/javascript" src="../../static/dist/slick/slick.min.js"></script>
  <script type="text/javascript">
    $(function () {
      {# TODO: 브라우저 사이즈가 1200보다 크거나 한 화면에 모든 작품이 보인다면 slick responsive 옵션을 사용하여 대응해야함. #}
      $(".slider").slick({
        infinite: true,
        autoplay: true,
        arrows: false,

        slidesToShow: 4,
        slidesToScroll: 1,
        variableWidth: true,

        lazyLoad: 'progressive'
      });

      $('.sliderControl .sliderPrevBtn').click(function () {
        $('.slider').slick('slickPrev');
      });

      $('.sliderControl .sliderNextBtn').click(function () {
        $('.slider').slick('slickNext');
      });
    });
  </script>
{% endblock %}

{% block contents %}
  <div class="patGallery">
    <div class="container">
      <div class="slider">
        {% for item in items|slice(0, 5) %}
          <div class="item {% if loop.first %}picked{% endif %}">
            <a href="/artworks/{{ item.id }}">
              <div class="imgThumb">
                <div class="dimm"></div>
                <div class="preview">
                  미리 보기 <i class="glyphicon glyphicon-menu-right"></i>
                </div>
                {# 썸네일 이미지 #}
                <img class="img" src="http://cfile5.uf.tistory.com/image/2341BF3B51261D2B0685D4" />
                <button class="pickBtn"></button>
                <div class="meta">
                  <div class="title">{{ item.title }}</div>
                  <div class="pick"><span class="">PICK</span> 360</div>
                </div>
              </div>
            </a>
          </div>
        {% endfor %}
      </div>
    </div>
    <div class="sliderControl">
      <button class="sliderPrevBtn">
        <i class="glyphicon glyphicon-menu-left"></i>
      </button>
      <button class="sliderNextBtn">
        <i class="glyphicon glyphicon-menu-right"></i>
      </button>
    </div>
  </div>

  <div class="patTypeSelect">
    <ul class="typeSelectTab">
      <li><a {% if type == 'artworks' %}class="active"{% endif %} href="?type=artworks">ARTIST</a></li>
      <li><a {% if type == 'places' %}class="active"{% endif %} href="?type=places">SPACE</a></li>
    </ul>
    <div class="divider"></div>
  </div>

  {% if type == 'places' %}
    <div class="patPlaceTagCloud">
      <div class="container">
        <div class="tagLabel"></div>
        <ul class="tagList">
          <li><a href="#">홍대</a></li>
          <li><a href="#">인천</a></li>
          <li><a href="#">아트플랫폼</a></li>
          <li><a href="#">한남동</a></li>
          <li><a href="#">상수</a></li>
        </ul>
      </div>
    </div>
  {% endif %}

  <div class="patItemList">
    <div class="container">
      {# 그리드 형태의 목록 (작품, 장소) #}
      <ul class="itemList{% if type == 'artworks' %} artworkList {% else %} placeList {% endif %}">
        {% for item in items %}
          {# STATUS: PICKED (이미 PICKED된 아트웍 또는 장소) 사용자가 이미 PICK 했는지 여부 정보 필요 #}
          <li class="item {% if (loop.index % 3) == 0 %}third{% endif %} {% if loop.first %}picked{% endif %}">
            <a href="/{{ type }}/{{ item.id }}">
              <div class="imgThumb">
                <div class="dimm"></div>
                <div class="preview">
                  미리 보기 <i class="glyphicon glyphicon-menu-right"></i>
                </div>
                {# 썸네일 이미지 #}
                <img class="img" src="http://cfile5.uf.tistory.com/image/2341BF3B51261D2B0685D4" />
                {% if loop.first and type == 'places' %}
                  <div class="placeStatusTag recruit"></div>
                {% endif %}
                <button class="pickBtn"></button>
              </div>
              <div class="meta">
                <div class="pick">
                  {# PICK 갯수 #}
                  <span class="bold">PICK</span> 364
                </div>
                <div class="title">{{ item.title }}</div>
                <div class="name">김종인</div>
              </div>
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

  {# 더 보기 버튼 #}
  <div class="patItemMore">
    <button class="patItemMoreButton">
      더 보기 <i class="glyphicon glyphicon-menu-down"></i>
    </button>
  </div>
{% endblock %}
